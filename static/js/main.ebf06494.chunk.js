(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{102:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},140:function(e){e.exports=JSON.parse('{"title":"NEWFILLEDLAYOUT","author":"Webb Hinton","added":"2021-11-30T05:00:00.000Z","id":"NEWFILLEDLAYOUT_11/30/2021 14:00:20","sourceLayout":{"layout":{"lg":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"md":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"sm":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"xs":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"xxs":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}]},"layoutSettings":{"cardSettings":[],"gridSettings":{"defaultBackgroundColor":"red"}},"widgets":[{"id":"clock","contentType":"widget","isActive":false},{"id":"clock","contentType":"widget","isActive":false}]},"layout":{"lg":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"md":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"sm":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"xs":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"xxs":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}]},"layoutWidgets":[{"id":"clock","contentType":"widget","isActive":false}]}')},151:function(e,t,a){},152:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},171:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},296:function(e,t,a){"use strict";a.r(t);var n,r,o,i,c,l,s=a(15),u=a(0),d=a.n(u),f=a(20),m=a.n(f),h=a(18),v=(a(151),a(152),a(142)),g=a(99),p=a(54);!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(n||(n={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(r||(r={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(o||(o={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(i||(i={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT",e.WIDGET="WIDGET"}(c||(c={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID",e.WIDGETS_TABLE="WIDGETS_TABLE"}(l||(l={}));var y=a(8),b=a(19),E=Object(s.e)(),w=E.useStoreActions,S=(E.useStoreDispatch,E.useStoreState);var x=function(){var e=w((function(e){return e.layoutsModel})),t=e.setCardScale,a=e.setCardBackgroundColor,n=e.setCardContentFit,r=w((function(e){return e.appModel})).setEditingCard,o=S((function(e){return e.appModel})).editingCard,i=S((function(e){return e.layoutsModel})),c=i.cardScale,l=i.cardBackgroundColor,s=i.cardContentFit;return{setEditingCard:r,editingCard:o,setCardScale:t,setCardBackgroundColor:a,clearEditingCard:function(){r(void 0)},cardScale:c,cardBackgroundColor:l,cardContentFit:s,setCardContentFit:n}},O=function(){var e=w((function(e){return e.appSettingsModel.setRotationSpeed})),t=w((function(e){return e.appSettingsModel.setShowQrCodes})),a=w((function(e){return e.appSettingsModel.setEnableIframeInteractions})),n=w((function(e){return e.appSettingsModel.setEnableIframeAudio})),r=w((function(e){return e.appSettingsModel.setRotateLayouts})),o=S((function(e){return e.appSettingsModel.rotationSpeed})),i=S((function(e){return e.appSettingsModel.enableIframeAudio})),c=S((function(e){return e.appSettingsModel.rotateLayouts}));return{rotationSpeed:o,enableQrCodes:S((function(e){return e.appSettingsModel.enableQrCodes})),enableIframeInteractions:S((function(e){return e.appSettingsModel.enableIframeInteractions})),rotateLayouts:c,enableIframeAudio:i,setRotationSpeed:e,setShowQrCodes:t,setBlockIframeInteractions:a,setRotateLayouts:r,setMuteIframeAudio:n}},C=function(){var e=w((function(e){return e.googleSheetsModel.fetchParentSheet})),t=S((function(e){return e.googleSheetsModel.urlSheet})),a=S((function(e){return e.googleSheetsModel.parentSheetUrl})),n=S((function(e){return e.googleSheetsModel.cardSheetUrl})),r=S((function(e){return e.googleSheetsModel.layoutSheetUrl})),o=w((function(e){return e.googleSheetsModel.setUrlSheet}));return{fetchTopLevelSheet:e,parentSheetUrl:a,cardSheetUrl:n,layoutSheetUrl:r,formUrl:S((function(e){return e.googleSheetsModel.formUrl})),setUrlSheet:o,refreshSheets:w((function(e){return e.googleSheetsModel.refreshSheets})),urlQueryLink:t}},j=function(){var e=S((function(e){return e.appModel.appErrors})),t=S((function(e){return e.layoutsModel.layoutErrors})),a=S((function(e){return e.googleSheetsModel.googleSheetsErrors}));return{appErrors:e,layoutErrors:t,googleSheetsErrors:a,allErrors:[].concat(Object(h.a)(e),Object(h.a)(t),Object(h.a)(a))}},L=function(){var e=w((function(e){return e.appModel.toggleAppMode})),t=S((function(e){return e.appModel.rotationSpeed})),a=S((function(e){return e.appModel.editingCard})),n=S((function(e){return e.appModel.rotateLayouts})),r=S((function(e){return e.googleSheetsModel.sheetsAreLoaded})),o=w((function(e){return e.appModel.setRotationSpeed})),i=w((function(e){return e.layoutsModel.transitionLayout})),c=w((function(e){return e.appModel.setRotateLayouts})),l=w((function(e){return e.appModel.addAppError})),s=w((function(e){return e.appModel.setEditingCard}));return{appMode:S((function(e){return e.appModel.appMode})),rotationSpeed:t,setRotationSpeed:o,editingCard:a,toggleAppMode:e,rotateLayouts:n,setRotateLayouts:c,addAppError:l,sheetsAreLoaded:r,transitionLayout:i,setEditingCard:s}};var k=function(){var e=S((function(e){return e.appModel.activeCards})),t=S((function(e){return e.appModel.activeWidgets})),a=S((function(e){return e.layoutsModel.externalLayouts})),n=w((function(e){return e.layoutsModel.swapCardContent})),r=w((function(e){return e.layoutsModel.deleteCard})),o=w((function(e){return e.layoutsModel.addCard})),i=w((function(e){return e.layoutsModel.setBufferLayout})),c=S((function(e){return e.layoutsModel.activeLayout})),l=w((function(e){return e.layoutsModel.setNextLayout}));return{activeCards:e,activeWidgets:t,setBufferLayout:i,activeLayout:c,deleteCard:r,addCard:o,swapCard:n,setActiveLayout:w((function(e){return e.layoutsModel.setActiveLayout})),useNextLayout:l,clearCards:w((function(e){return e.layoutsModel.clearCards})),resetLayout:w((function(e){return e.layoutsModel.resetLayout})),externalLayouts:a}};function A(e,t,a){var n=Object(u.useRef)();Object(u.useEffect)((function(){var r=(null===a||void 0===a?void 0:a.current)||window;if(r&&r.addEventListener){n.current!==t&&(n.current=t);var o=function(e){null!==n&&void 0!==n&&n.current&&n.current(e)};return r.addEventListener(e,o),function(){r.removeEventListener(e,o)}}}),[e,a,t])}function I(){var e=Object(u.useState)({width:0,height:0}),t=Object(y.a)(e,2),a=t[0],n=t[1],r=function(){n({width:window.innerWidth,height:window.innerHeight})};return A("resize",r),Object(u.useLayoutEffect)((function(){r()}),[]),a}var D=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}},T=function(e){var t=e.children,a=k(),n=a.addCard,r=a.swapCard,o=a.setActiveLayout,i=S((function(e){return e.layoutsModel.externalLayouts}));return d.a.createElement(p.a,{onDragEnd:function(e){var t,a;if((null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(a=e.source)||void 0===a?void 0:a.droppableId)){var c=e.source,s=e.destination,u=e.draggableId;if(s)switch(c.droppableId){case l.CARD_TABLE:if(s.droppableId)if(s.droppableId.startsWith("empty")){var d=D(s.droppableId);n({sourceId:u,targetPosition:d})}else r({sourceId:u,targetId:s.droppableId});break;case l.WIDGETS_TABLE:var f=D(s.droppableId);n({sourceId:u,targetPosition:f});break;case l.LAYOUT_TABLE:var m=i.filter((function(e){return e.id===u}))[0];o(m);break;default:console.log("got unkown drag source")}}}},t)},M={idleTime:1e7,noUrlTimeout:10,rotationDuration:1e5},R={backupParentSheetUrl:"".concat("/cupboard-dxl-display","/backupSheets/BACKUP_PARENT_SHEET.csv"),defaultIframeScale:.5,defaultEmbedScale:1,widgetIds:["clock","group label","info"],showModeSwitchButton:!1,useStaticLayout:!1,timers:M,gridSettings:{gridRows:6,gridCols:4,gridBottomPadding:50}},_=a(336),N=function(e){var t,a=e.children,r=Object(_.a)(R.timers.idleTime,!1),o=O(),i=o.rotationSpeed,c=o.rotateLayouts,l=L(),s=l.appMode,d=l.toggleAppMode,f=l.transitionLayout,m=function(e,t){var a=Object(u.useRef)(e),n=Object(u.useRef)();return Object(u.useLayoutEffect)((function(){a.current=e}),[e]),Object(u.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return a.current()}),t);return n.current=e,function(){return clearInterval(e)}}}),[t]),{reset:Object(u.useCallback)((function(){n.current&&t&&(clearInterval(n.current),n.current=setInterval(a.current,t))}),[t]),stop:Object(u.useCallback)((function(){n.current&&clearInterval(n.current)}),[])}}((function(){s===n.DISPLAY&&c&&f(1)}),i).reset;return t=function(){m()},A("click",(function(e){t(e)})),Object(u.useEffect)((function(){s===n.EDIT&&d()}),[r]),a},P=(a(156),a(26)),U=a.n(P),W=a(313),z=a(337),B=a(31),G=a(13);function V(e){if(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear().toString().slice(2);return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[a,n,r].join(".")}return"faulty date"}function F(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Y(e,t){return Math.random()*(t-e)+e}var H={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},J=new G.Vector2(1,2);function Q(e,t,a){return new G.Vector3(e,t,a)}var K={pink:Q(182,9,76),brightPink:Q(241,3,66),darkPurple:Q(42,8,56),orange:Q(244,93,31),darkgrey:Q(50,50,50),lightgrey:Q(150,150,150),red:Q(204,0,0)},q={u_bg:{type:"v3",value:K.lightgrey},u_bgMain:{type:"v3",value:K.lightgrey},u_color1:{type:"v3",value:K.lightgrey},u_color2:{type:"v3",value:K.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:J}},X=function(e){var t=e.position,a=Object(u.useRef)(),n=0,r=0,o=F(0,32),i=F(0,32),c=!1;return Object(B.b)((function(e){e.clock;a.current.uniforms.u_randomisePosition.value=new G.Vector2(r,r),a.current.uniforms.u_color1.value=new G.Vector3(function(e,t,a){return Math.floor(192+64*Math.cos((e*e-t*t)/300+a))}(o,i,n/2),function(e,t,a){return Math.floor(192+64*Math.sin((e*e*Math.cos(a/4)+t*t*Math.sin(a/3))/300))}(o,i,n/2),function(e,t,a){return Math.floor(192+64*Math.sin(5*Math.sin(a/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(o,i,n/2)),a.current.uniforms.u_time.value=n,n%.1===0&&(!1===c?(o-=1)<=0&&(c=!0):(o+=1)>=32&&(c=!1)),r+=.01,n+=.01})),d.a.createElement("mesh",{position:t,rotation:[G.MathUtils.degToRad(0),G.MathUtils.degToRad(0),G.MathUtils.degToRad(90)]},d.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),d.a.createElement("shaderMaterial",{attach:"material",vertexShader:H.vertexShader,fragmentShader:H.fragmentShader,uniforms:q,ref:a}))},$=function(){var e=Object(u.useRef)();return d.a.createElement(B.a,{gl:{antialias:!1,alpha:!1}},d.a.createElement(W.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),d.a.createElement(X,{position:[0,0,-100],faceResolution:100}),d.a.createElement(z.a,null))},Z=function(){var e=L().appMode,t=Object(u.useState)({backgroundColor:"gray"}),a=Object(y.a)(t,2),r=a[0],o=a[1];Object(u.useEffect)((function(){var t={position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:e===n.EDIT?"#2d2d2d":"gray",transition:"background-color 0.5s ease"};o(t)}),[e]);var i=U()("background-container",{"background-container-display-mode":e==n.DISPLAY,"background-container-edit-mode":e==n.EDIT});return m.a.createPortal(d.a.createElement("div",{className:i,style:r},e===n.EDIT?d.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):d.a.createElement("div",{className:"background-container"},d.a.createElement("div",{className:"shader-container"},d.a.createElement($,null)),d.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},ee=d.a.memo(Z),te=(a(102),a(158),a(331)),ae=a(65),ne=(a(171),a(133)),re=function(e){var t,a=e.onLoad,n=e.onError,r=e.card,o=e.cardSettings,i=(e.cardView,O().enableIframeInteractions),c=null!==(t=null===o||void 0===o?void 0:o.scale)&&void 0!==t?t:1,l=r.src;return d.a.createElement("iframe",{onError:function(e){n(e,r)},onLoad:function(e){a(e,r)},src:l,style:{transform:"scale(".concat(c,")"),pointerEvents:i?"all":"none",width:"".concat(1/c*100,"%"),height:"".concat(1/c*100,"%"),transformOrigin:"top left"}})},oe=function(e){var t,a,n=e.onLoad,o=e.onError,i=e.card,c=e.cardSettings,l=e.cardView,s=i.src;return d.a.createElement("img",{onError:function(e){o(e,i)},onLoad:function(e){n(e,i)},src:s,style:{transform:"scale(".concat(null!==(t=null===c||void 0===c?void 0:c.scale)&&void 0!==t?t:1,")"),width:"100%",height:"100%",objectFit:null!==(a=null===c||void 0===c?void 0:c.contentFit)&&void 0!==a?a:"cover",objectPosition:l===r.PREVIEW?"contain":"center"}})},ie=a.n(ne).a,ce=function(e){var t=e.card,a=(e.scale,e.cardView),n=e.onError,r=e.onLoad,o=(e.objectFit,e.cardSettings),i=Object(u.useState)(!1),c=Object(y.a)(i,2),l=c[0],s=c[1],f=Object(u.useState)(!0),m=Object(y.a)(f,2),h=m[0],v=(m[1],Object(u.useState)(!1)),g=Object(y.a)(v,2),p=(g[0],g[1]),b=U()("iframe-container",{"iframe-container-hidden":!h});Object(u.useEffect)((function(){}),[a]);var E=t.src,w=t.contentType;return d.a.createElement("div",{className:b,onDoubleClick:function(){s(!l)}},"video"===w?d.a.createElement(se,{onReady:function(e){p(!0)},src:E}):"image"===w?d.a.createElement(oe,{card:t,cardSettings:o,cardView:a,onError:n,onLoad:r}):d.a.createElement(re,{card:t,cardSettings:o,cardView:a,onError:n,onLoad:r}))},le=d.a.memo(ce),se=function(e){var t=e.src,a=e.onReady;return d.a.createElement("div",{className:"player-wrapper"},d.a.createElement(ie,{className:"react-player",controls:!0,height:"100%",muted:!0,onReady:a,playing:!0,url:t,width:"100%"}))},ue=a(14),de=(a(189),a(190),a(314)),fe=function(){return d.a.createElement("div",{className:"pulsar"},d.a.createElement(de.a,{size:150}))},me=["children","className","cardType"],he=function(e){var t=e.children,a=e.className,n=(e.cardType,Object(ue.a)(e,me));return d.a.createElement(p.c,Object.assign({},n,{type:"DEFAULT"}),(function(e,n){return d.a.createElement("div",Object.assign({},e.innerRef,{className:n.isDraggingOver?"droppable-hovered "+a:"droppable "+a,ref:e.innerRef}),d.a.createElement("div",{className:n.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},d.a.createElement(fe,null)),t,e.placeholder)}))},ve=(a(122),function(){var e=Object(u.useState)(new Date),t=Object(y.a)(e,2),a=t[0],n=t[1];return Object(u.useEffect)((function(){var e=setInterval((function(){n(new Date)}),1e3);return function(){clearInterval(e)}})),d.a.createElement("div",{style:{boxSizing:"border-box",color:"white",fontWeight:600,height:"100%",overflow:"hidden",padding:"3vmin",width:"100%"}},d.a.createElement("div",{style:{color:"white",fontSize:"8vmin"}},"Data Experience Lab"),d.a.createElement("div",{style:{color:"white",fontSize:"8vmin"}},a.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),ge=a(317),pe=(a(123),a(315)),ye=a(316),be=(a(256),function(e){var t=e.children,a=e.active,n=e.containerClassName,r=e.onClose,o=e.backdropOpacity;return d.a.createElement(te.a.div,{animate:{y:0},className:"modal-container",style:{display:a?"flex":"none",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"}},d.a.createElement(Ee,{backdropOpacity:null!==o&&void 0!==o?o:0,onClose:r}),d.a.createElement("div",{className:n,style:{zIndex:1e3}},t))}),Ee=function(e){var t=e.onClose,a=e.backdropOpacity;return d.a.createElement("div",{className:"pop-up-background",onMouseUp:t,style:{opacity:a,zIndex:200}})},we=(a(257),function(e){var t,a=e.children,n=e.className,r=e.padding,o=e.flexDirection,i={padding:null!==r&&void 0!==r?r:"0em",flexDirection:null!==o&&void 0!==o?o:"column"};return d.a.createElement("div",{className:null!==(t="panel "+n)&&void 0!==t?t:"",style:i},a)}),Se=function(e){var t=e.active,a=e.onClose;return Object(u.useEffect)((function(){console.log(t)}),[t]),m.a.createPortal(d.a.createElement(be,{active:t,backdropOpacity:0,onClose:a},d.a.createElement(te.a.div,{animate:t?"visible":"hidden",style:{width:"30vw",height:"80vh",backgroundColor:"white",borderRadius:10,padding:"1em"},variants:{hidden:{y:100,opacity:0},visible:{opacity:1,y:0,transition:{duration:.5}}}},d.a.createElement(we,null,d.a.createElement(pe.a,null,"Connect Labtop"),d.a.createElement("hr",null),d.a.createElement(ye.a,null,"Connect your labtop to use this screen as a display."),d.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/labtopdiagram.png"}),d.a.createElement(pe.a,null,"Explore Content"),d.a.createElement("hr",null),d.a.createElement(ye.a,null,"Click on a card to explore data related content."),d.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/masonary.png"})))),document.querySelector("#popup-container"))},xe=a(75),Oe=function(e){var t=e.onClick,a=e.text,n=e.appearance,r=e.className,o=e.iconBefore,i=e.width,c=e.height,l=e.style,s=e.containerClass,u=e.fontSize,f=e.intent;return d.a.createElement("div",{className:s,onMouseUp:t,style:{width:i,height:"100%"}},d.a.createElement(xe.a,{appearance:null!==n&&void 0!==n?n:"default",className:r,cursor:"pointer",fontSize:u,height:null!==c&&void 0!==c?c:void 0,iconBefore:null!==o&&void 0!==o?o:void 0,intent:null!==f&&void 0!==f?f:"none",style:l,width:null!==i&&void 0!==i?i:void 0},a))},Ce=function(){var e=Object(u.useState)(new Date),t=Object(y.a)(e,2),a=(t[0],t[1]),n=function(e){var t=Object(u.useState)(e),a=Object(y.a)(t,2),n=a[0],r=a[1];return[n,function(){return r(!n)}]}(!1),r=Object(y.a)(n,2),o=r[0],i=r[1];Object(u.useEffect)((function(){var e=setInterval((function(){a(new Date)}),1e3);return function(){clearInterval(e)}}));L().appMode;return d.a.createElement("div",{id:"how-to-use-button-widget",style:{height:"100%",width:"100%",fontSize:"9vmin",fontWeight:600,color:"white",boxSizing:"border-box",backgroundColor:"blue"}},d.a.createElement(Se,{active:o,onClose:i}),d.a.createElement(Oe,{appearance:"primary",className:"how-to-use-button",fontSize:"xx-large",height:"100%",iconBefore:d.a.createElement(ge.a,null),onClick:i,text:"Learn how to use this display",width:"100%"}))},je=function(e){var t=e.widget,a=e.scale,n=e.colWidth,r=e.rowHeight;e.cardSettings;return d.a.createElement("div",{className:"card-display",style:{width:n?t.w*n:"100%",height:r?t.h*r:"100%",transform:"scale(".concat(a,")"),transformOrigin:"top left",borderRadius:".5em",overflow:"hidden"}},function(e){var t=d.a.createElement("div",null);switch(e){case"clock":t=d.a.createElement(ve,null);break;case"info":t=d.a.createElement(Ce,null);break;default:t=d.a.createElement("div",null)}return t}(t.id))},Le=(a(124),a(135),function(e){var t,a=e.children,n=e.card,r=e.cardSettings,o=x().editingCard;return d.a.createElement("div",{className:"card-backdrop",style:{overflow:"hidden",borderRadius:"0.5em",width:"100%",height:"100%",backgroundColor:null!==(t=null===r||void 0===r?void 0:r.backgroundColor)&&void 0!==t?t:"",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",border:n.id===(null===o||void 0===o?void 0:o.id)?"3px solid white":"1px solid rgba(255, 255, 255, 0.294)"}},a)}),ke=(a(265),function(e){var t=e.data,a=(e.className,Object(u.useState)(!1)),n=Object(y.a)(a,2);n[0],n[1];return d.a.createElement("div",{className:"card-footer"},d.a.createElement("h2",{style:{}},t.title),d.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," "))}),Ae=function(e){var t=e.children,a=e.animation,r=e.card,o=(e.backgroundColor,{active:{opacity:1,transition:{delay:Y(.4,.5),duration:.5}},preview:{opacity:1,transition:{duration:.2}},none:{opacity:1,x:0,y:0},error:{backgroundColor:"red"},loaded:{opacity:1,transition:{delay:Y(.4,.5),duration:.5},x:0},out:{y:Y(-50,-75),opacity:0,transition:{delay:Y(.1,.5),duration:.5}}}),i=L().appMode;return d.a.createElement(te.a.div,{animate:a,initial:"widget"===(null===r||void 0===r?void 0:r.contentType)?"loaded":"",layoutId:"viewcard",style:{opacity:i===n.DISPLAY?0:1,y:0},variants:o},t)},Ie=(a(266),a(318)),De=function(e){var t=e.onClick;e.action;return d.a.createElement("div",{className:"delete-button-container",onClick:t,onMouseUp:t,onTouchEnd:function(e){}},d.a.createElement("div",{style:{display:"flex"}},d.a.createElement(Ie.a,{size:30})))},Te=(a(267),a(319)),Me=function(e){var t=e.onClick;return d.a.createElement("div",{onMouseUp:t,style:{position:"absolute",bottom:"40%",left:0,width:40,height:40,borderRadius:"50%",overflow:"hidden",boxShadow:"var(--shadow)",zIndex:100,background:"white",justifyContent:"center",alignItems:"center",display:"flex",transform:"translate(-50%, 0px)"}},d.a.createElement("div",{style:{display:"flex"}},d.a.createElement(Te.a,{size:30})))},Re=function(e){var t=e.cardType,a=e.children,o=e.cardId,i=e.data,c=e.onClick,l=e.cardSettings,f=(e.useAnimation,L()),m=f.appMode,h=f.addAppError,v=f.setEditingCard,g=k().deleteCard,p=Object(u.useState)(r.GRID),b=Object(y.a)(p,2),E=b[0],w=b[1],O=Object(u.useState)(!1),C=Object(y.a)(O,2),j=(C[0],C[1]),A=Object(u.useState)(!1),I=Object(y.a)(A,2),D=(I[0],I[1]),T=Object(u.useState)("widget"===(null===i||void 0===i?void 0:i.contentType)?"loaded":""),M=Object(y.a)(T,2),R=M[0],_=M[1],N=x().setCardScale,P=S((function(e){return e.layoutsModel.animationCounter}));Object(u.useEffect)((function(){m===n.DISPLAY&&_("out"),"widget"===(null===i||void 0===i?void 0:i.contentType)&&_("loaded")}),[P,m,null===i||void 0===i?void 0:i.contentType]);var W,z,B=Object(s.h)((function(){var e;return{cardBackgroundColor:"",cardType:t,cardView:r.GRID,handleCardPress:Object(s.f)((function(e,t,a){var c,l=a.getState,s=document.querySelector("#root");if((s.style.pointerEvents="all")&&(s.style.pointerEvents="none"),setTimeout((function(){s.style.pointerEvents="all"}),1e3),m===n.DISPLAY&&void 0!=o)switch(l().cardView){case r.GRID:break;case r.PREVIEW:e.setCardView(r.GRID),document.getElementById(null!==(c=null===i||void 0===i?void 0:i.id)&&void 0!==c?c:"view_card").style.zIndex="0"}})),scale:null!==(e=null===l||void 0===l?void 0:l.scale)&&void 0!==e?e:1,setBackgroundColor:Object(s.b)((function(e,t){e.cardBackgroundColor=t})),setCardView:Object(s.b)((function(e,t){e.cardView=t})),setScale:Object(s.b)((function(e,t){e.scale+=t,i&&N({cardId:null===i||void 0===i?void 0:i.id,scale:e.scale})})),setShowMenu:Object(s.b)((function(e,t){e.showMenu=t})),showMenu:!1,toggleMenu:Object(s.b)((function(e){e.showMenu=!e.showMenu}))}}),[m],(function(){return{devTools:!1}})),G=Object(y.a)(B,2),V=G[0],F=G[1],Y=U()("card-modal-backdrop",{"card-modal-backdrop-active":E===r.PREVIEW||E===r.FULL_SCREEN,"card-modal-backdrop-inactive":E===r.GRID}),H=U()("card-child-container",{"card-child-container-preview":V.cardView===r.PREVIEW,"card-child-container-fullscreen":V.cardView===r.FULL_SCREEN,"card-child-container-grid":V.cardView===r.GRID}),J=function(e){var t=e.keyCode,a=e.action,n=e.disabled;d.a.useEffect((function(){return n||r(),function(){o()}}));var r=function(){document.addEventListener("keydown",i)},o=function(){document.removeEventListener("keydown",i)},i=function(e){e.keyCode===t&&(e.preventDefault(),a(e))};return{enable:r,disable:o}}({keyCode:27,action:function(){E!==r.FULL_SCREEN&&E!==r.PREVIEW||w(r.GRID)},disabled:!1}),Q=(J.enable,J.disable,function(){if(m==n.EDIT&&i)return d.a.createElement(d.a.Fragment,null,d.a.createElement(De,{action:function(){g(i.id)},onClick:function(){g(i.id)}}),"widget"!==i.contentType&&d.a.createElement(Me,{onClick:function(e){"widget"!==i.contentType&&v(i)}}))}),K=function(){if(E===r.PREVIEW&&i&&"widget"!==i.contentType)return d.a.createElement(ke,{className:"",data:i})},q=Object(u.useRef)(null);W=q,z=function(e){e.preventDefault(),V.cardView==r.PREVIEW&&F.setCardView(r.GRID)},Object(u.useEffect)((function(){var e=function(e){var t=null===W||void 0===W?void 0:W.current;t&&!t.contains(e.target)&&z(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[W,z]);return Object(u.useEffect)((function(){V.cardView,r.PREVIEW,V.cardView,r.GRID}),[V.cardView]),Object(u.useEffect)((function(){console.log(R)}),[R]),d.a.createElement(d.a.Fragment,null,i&&d.a.createElement(Ae,{animation:R,backgroundColor:V.cardBackgroundColor,card:i},a&&d.a.createElement("div",{className:Y},d.a.createElement("div",{className:H,onMouseUp:function(){F.handleCardPress(),c&&c()},ref:q},"widget"!==(null===i||void 0===i?void 0:i.contentType)?[Q(),K()]:[Q()],d.a.createElement(Le,{card:i,cardSettings:l},a(V.scale,V.cardView,(function(e,t){var a=t.title,n=t.src;h({errorType:"failed to load content",description:"description",source:"Card: ".concat(a),link:n}),j(!0)}),(function(e,t){m===n.DISPLAY&&_("loaded"),D(!0)}),null!==l&&void 0!==l?l:{id:"not found",scale:1}))),function(){if(E===r.FULL_SCREEN)return d.a.createElement(_e,{onClick:function(){w(r.GRID)}})}())))},_e=function(e){var t=e.onClick;return d.a.createElement("div",{className:"return-button-container"},d.a.createElement(Oe,{onClick:t,text:"Return",width:300}))},Ne=d.a.memo(Re),Pe=function(e){var t=e.gridSettings,a=Object(ae.WidthProvider)(ae.Responsive),n=function(e,t){for(var a=[],n=0;n<e;n++)for(var r=0;r<t;r++)a.push({x:r,y:n});var o=a.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return{lg:o,md:o,sm:o,xs:o,xxs:o}}(R.gridSettings.gridRows,R.gridSettings.gridCols),r=n.lg.map((function(e){return e.i}));return d.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},d.a.createElement(a,Object.assign({},t,{className:"card-layout",isDraggable:!1,isResizable:!1,layouts:n,preventCollision:!0,resizeHandles:[]}),r.map((function(e,t){return d.a.createElement("div",{key:e},d.a.createElement(he,{cardType:c.PLACEHOLDER,className:"droppable-guide",droppableId:e,key:t},d.a.createElement(Ne,{cardId:e,cardType:c.PLACEHOLDER,key:e,useAnimation:!1})))}))))},Ue=d.a.memo(Pe);var We=function(e){e.appMode;var t=e.layout,a=e.cardSettings,n=(e.width,e.height),r=e.margin,o=e.onLayoutChange,i=e.cards,l=e.widgets,s=e.cols,f=(e.rows,e.isDraggable),m=e.isResizable,v=t;Object(u.useEffect)((function(){console.log(null===v||void 0===v?void 0:v.id)}),[null===v||void 0===v?void 0:v.id]),console.log(v);var g=Object(ae.WidthProvider)(ae.Responsive),p={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:s,md:s,sm:s,xs:s,xxs:s},rowHeight:n/R.gridSettings.gridRows,margin:r,preventCollision:!0,compactType:null};return console.log(l),d.a.createElement("div",null,d.a.createElement(te.a.div,{animate:{opacity:1,y:0,transition:{delay:1}},className:"card-grid-container",initial:{opacity:0,y:50}},d.a.createElement(g,Object.assign({},p,{className:"card-layout",isDraggable:null!==f&&void 0!==f&&f,isResizable:null!==m&&void 0!==m&&m,layouts:null!==t&&void 0!==t?t:{lg:[]},onDragStart:function(e,t,a,n,r,o){o.style.border="2px solid cyan",o.style.border="4px solid cyan"},onLayoutChange:o,preventCollision:!0,resizeHandles:["se"],verticalCompact:!0}),[].concat(Object(h.a)(i),Object(h.a)(l)).map((function(e,t){return d.a.createElement(te.a.div,{className:"card-container",exit:{y:-100},id:"".concat(e.id,"_grid_container"),key:e.id,style:{width:"100%"}},d.a.createElement(he,{cardType:c.IFRAME,className:"droppable-card",droppableId:e.id,key:t},d.a.createElement(Ne,{cardId:t.toString(),cardSettings:a.find((function(t){return t.id===e.id})),cardType:c.IFRAME,data:e,useAnimation:"widget"!==e.contentType},"widget"!==e.contentType?function(t,a,n,r,o){var i=e;return d.a.createElement(le,{card:i,cardSettings:o,cardView:a,onError:n,onLoad:r,scale:t})}:function(t,a,n,r,o){return d.a.createElement(je,{cardSettings:o,scale:1,widget:e})})))})))),d.a.createElement(Ue,{gridSettings:p}))},ze=(a(96),a(327)),Be=a(328),Ge=a(70),Ve=a.n(Ge),Fe=(a(268),a(39)),Ye=a(320),He=a(10),Je=function(e){return d.a.createElement("div",Object.assign({},e,{style:Object(He.a)(Object(He.a)({},e.style||{}),{},{display:"flex",flexDirection:"column"})}))},Qe=function(e){return d.a.createElement("div",Object.assign({},e,{style:Object(He.a)(Object(He.a)({},e.style||{}),{},{display:"flex"})}))},Ke=function(e){var t,a;return d.a.createElement("div",Object.assign({},e,{style:Object(He.a)(Object(He.a)({},e.style||{}),{},{width:null!==(t=null===e||void 0===e||null===(a=e.style)||void 0===a?void 0:a.width)&&void 0!==t?t:"inherit",padding:".5em"})}),e.children)},qe=function(e){var t=e.children,a=e.onChange,n=e.value,r=Object(u.useState)(n),o=Object(y.a)(r,2),i=o[0],c=o[1];return d.a.createElement(Qe,{style:{margin:".5em",justifyContent:"space-between",width:"50%"}},d.a.createElement(Xe,null,t),d.a.createElement("div",{style:{paddingLeft:".5em"}},d.a.createElement(Ye.a,{checked:i,defaultChecked:!1,onChange:function(e){console.log(e.target.value),a(e.target.checked),c(e.target.checked)},style:{margin:"auto"}})))},Xe=function(e){var t=e.children;return d.a.createElement("div",{style:{color:"white"}},t)},$e=function(){var e=O(),t=(e.setRotationSpeed,e.setBlockIframeInteractions),a=(e.setShowQrCodes,e.enableIframeInteractions),n=e.setRotateLayouts,r=e.setMuteIframeAudio,o=e.enableIframeAudio,i=e.rotateLayouts;return d.a.createElement(Ke,null,d.a.createElement(pe.a,{size:600,style:{color:"white"}},"General"),d.a.createElement("div",{style:{margin:".5em"}},d.a.createElement(Je,null,d.a.createElement(qe,{onChange:function(e){return n(e)},value:i},"RotateLayouts"),d.a.createElement(qe,{onChange:function(e){return t(e)},value:a},"Enable IFrame Interactions"),d.a.createElement(qe,{onChange:function(e){return r(e)},value:o},"Enable IFrame Audio"))),d.a.createElement(Ze,null))},Ze=function(){var e=C(),t=e.cardSheetUrl,a=e.layoutSheetUrl,n=e.formUrl,r=[e.parentSheetUrl,t,a,n],o=["Parent Sheet","Content","Layouts","Google Form"];return d.a.createElement(Je,null,d.a.createElement(pe.a,{size:600,style:{color:"white"}},"Google Sheets"),d.a.createElement(Je,{style:{padding:".5em",backgroundColor:"#1f1f1f",overflow:"hidden"}},r.map((function(e,t){return d.a.createElement(et,{link:null!==e&&void 0!==e?e:"not provided",title:o[t]})}))))},et=function(e){var t=e.title,a=e.link;return d.a.createElement(Qe,{style:{padding:".5em",backgroundColor:"#1f1f1f",overflow:"hidden",justifyContent:"space-between"}},d.a.createElement(pe.a,{style:{color:"white"}},t+":  "),d.a.createElement("a",{href:a,rel:"noreferrer",style:{color:"white",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"80%"},target:"_blank"},a))},tt=(a(78),a(334)),at=a(332),nt=a(322),rt=a(323),ot=a(136),it=a.n(ot),ct=a(137),lt=a(138),st=a.n(lt),ut=["dndType","className","children","dragAll","card"],dt=function(e){e.dndType;var t=e.className,a=e.children,n=e.dragAll,r=(e.card,Object(ue.a)(e,ut));if(!d.a.isValidElement(a))return d.a.createElement("div",null);!function(){var e=Object(u.useRef)(document.createElement("div")).current;Object(u.useEffect)((function(){if(e)return e.style.pointerEvents="none",e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.top="0",document.body.append(e),function(){e.remove()}}),[e])}();return d.a.createElement(p.b,r,(function(e,r){var o=n?e.dragHandleProps:{};return r.isDragging&&e&&e.draggableProps&&e.draggableProps.style&&(e.draggableProps.style.left=e.draggableProps.style.offsetLeft,e.draggableProps.style.top=e.draggableProps.style.offsetTop),d.a.createElement(d.a.Fragment,null,d.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,o),d.a.cloneElement(a,{provided:e})),d.a.createElement("tr",{style:{display:r.isDragging?"table-row":"none",backgroundColor:r.isDragging?"green":"none"}},d.a.cloneElement(a,{provided:e})))}))};dt.defaultProps={dragAll:!0};var ft,mt,ht=d.a.memo(dt),vt=function(e){return{display:e?"flex":"none"}},gt=function(e){var t=e.height,a=void 0===t?80:t,n=e.width,r=void 0===n?80:n,o=e.color,i=void 0===o?"green":o,c=e.ariaLabel,l=void 0===c?"circles-loading":c,s=e.wrapperStyle,u=e.wrapperClass,f=e.visible,m=void 0===f||f;return d.a.createElement("div",{className:u,"data-testid":"circles-loading",style:Object(He.a)(Object(He.a)({},vt(m)),s)},d.a.createElement("svg",{"aria-label":l,"data-testid":"circles-svg",fill:i,height:a,viewBox:"0 0 135 135",width:r,xmlns:"http://www.w3.org/2000/svg"},d.a.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},d.a.createElement("animateTransform",{attributeName:"transform",dur:"2.5s",from:"0 67 67",repeatCount:"indefinite",to:"-360 67 67",type:"rotate"})),d.a.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},d.a.createElement("animateTransform",{attributeName:"transform",dur:"8s",from:"0 67 67",repeatCount:"indefinite",to:"360 67 67",type:"rotate"}))))},pt=a(333),yt=function(e){var t=e.x,a=e.y,n=e.children,r=e.visible,o=e.width,i=e.height,c=I();return Object(f.createPortal)(d.a.createElement(pt.a,null,r&&d.a.createElement(te.a.div,{animate:{opacity:1,transition:{delay:.1,duration:.2,ease:"circIn"}},exit:{opacity:0},style:{backgroundColor:"white",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",width:null!==o&&void 0!==o?o:.4*c.width,height:null!==i&&void 0!==i?i:.4*c.height,position:"absolute",x:t,y:a,transformBox:"view-box",transformOrigin:"top left",borderRadius:".5em",overflow:"hidden"}},n)),document.querySelector("#popup-container"))},bt=d.a.memo(yt),Et=function(e){var t=e.headerTitle,a=e.setFilter,n=e.setFilterDirection,r=e.className,o=e.activeFilter,i=Object(u.useState)(!0),c=Object(y.a)(i,2),l=c[0],s=c[1],f=t===o;return d.a.createElement("th",{className:null!==r&&void 0!==r?r:"editor-panel-table-header",onClick:function(){a(t),s(!l),n(l)}},t.split(" ").map((function(e){return function(e){var t,a=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(a))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" "),f&&l?"\u25b2":f&&!l?"\u25bc":"")},wt=function(e){var t=e.card,a=t.src,n=t.id,o=t.title,i=n+"_icon",c=Object(u.useState)([0,0]),l=Object(y.a)(c,2),s=l[0],f=l[1],m=Object(u.useState)(!1),h=Object(y.a)(m,2),v=h[0],g=h[1],p=Object(u.useState)(!1),b=Object(y.a)(p,2),E=(b[0],b[1]),w=Object(u.useState)(),S=Object(y.a)(w,2),x=S[0],O=S[1];return d.a.createElement("div",{onMouseEnter:function(e){O(setTimeout((function(){var t,a=e.pageY,n=(null===(t=document.getElementById(i))||void 0===t?void 0:t.parentElement).getBoundingClientRect().x;f([n+100,a]),g(!0)}),250))},onMouseLeave:function(e){x&&(clearTimeout(x),g(!1))},style:{display:"flex"}},d.a.createElement("div",{id:i,style:{display:"flex",width:20}},d.a.createElement(st.a,{className:t.isActive?"row-favicon-active":"row-favicon-inactive",fallbackImage:"".concat("/cupboard-dxl-display","/question_mark.svg"),src:"image"===t.contentType?a:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src),style:{width:"100%",maxWidth:20}})),d.a.createElement(bt,{visible:v,x:s[0],y:s[1]},d.a.createElement(le,{card:t,cardView:r.GRID,objectFit:"contain",onError:function(e){},onLoad:function(e){E(!0)},scale:1})),d.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left",paddingLeft:"1em"}},o))},St=function(){var e=S((function(e){return e.appModel.availableCards})),t=k(),a=t.clearCards,n=t.resetLayout,r=C().refreshSheets,o=Object(u.useState)(),i=Object(y.a)(o,2),s=i[0],f=i[1],m=Object(u.useState)(!0),v=Object(y.a)(m,2),g=v[0],p=v[1],b=Object(u.useState)(e),E=Object(y.a)(b,2),w=E[0],x=E[1],O=Object(u.useState)(""),j=Object(y.a)(O,2),L=j[0],A=j[1],I=Object(u.useState)(e),D=Object(y.a)(I,2),T=D[0],M=D[1];Object(u.useEffect)((function(){if(0<L.length){var e=it.a.go(L,w.map((function(e){return e.title}))).map((function(e){return e.target})),t=w.filter((function(t){return e.includes(t.title)}));M(t)}else M(w)}),[L,w]),Object(u.useEffect)((function(){var t=s,a=Object(h.a)(e).sort((function(e,a){var n=e[t],r=a[t];if(n&&r){if(n<r)return-1;if(r<n)return 1}return 0}));!g&&a.reverse(),x(a)}),[s,e,g]);var R=d.a.useState(""),_=Object(y.a)(R,2),N=_[0],P=_[1];return d.a.useEffect((function(){setTimeout((function(){return P("lolol")}),1e3)})),Object(u.useEffect)((function(){console.log(N)}),[N]),d.a.createElement("div",{className:"contents-tab-container"},d.a.createElement(Qe,{style:{padding:"0.5em"}},d.a.createElement(tt.a,{onChange:function(e){return A(e.target.value)},value:L,disabled:!1,width:"90%"}),d.a.createElement(Qe,{style:{width:"100%",justifyContent:"space-around"}},d.a.createElement("div",{style:{height:"100%",width:"10%"}},d.a.createElement(at.a,{content:"Reload content"},d.a.createElement(nt.a,{height:"100%",icon:d.a.createElement(rt.a,null),onClick:function(e){r()},width:"20%"}))),d.a.createElement(Oe,{appearance:"default",intent:"danger",onClick:function(e){n()},text:"Reset Layout"}),d.a.createElement(Oe,{appearance:"minimal",intent:"danger",onClick:function(e){a()},text:"Clear All"}))),d.a.createElement(he,{cardType:c.CLOCK,className:"table-container",droppableId:l.CARD_TABLE,isDropDisabled:!0},d.a.createElement("table",{className:"contents-tab-table"},d.a.createElement("tbody",{onClick:function(e){}},d.a.createElement("tr",null,["title","author","added"].map((function(e,t){return d.a.createElement(Et,{activeFilter:s,className:"contents-table-header",headerTitle:e,key:t,setFilter:f,setFilterDirection:p})}))))),d.a.createElement(ct.Scrollbars,{autoHeight:!0,autoHeightMax:319,autoHeightMin:100},d.a.createElement("table",{style:{padding:"2em"}},d.a.createElement("tbody",null,T.map((function(e,t){var a=e.added,n=e.id,r=e.author,o=(e.interaction,e.isActive);return d.a.createElement(ht,{card:e,className:o?"content-row-active":"content-row-inactive",dndType:c.CARD_ROW,draggableId:n,index:t,isDragDisabled:o,key:t.toString()},d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null,d.a.createElement(wt,{card:e})),d.a.createElement("td",null,r),d.a.createElement("td",null,V(a))))})))))))},xt=function(e){var t=e.error,a=t.errorType,n=t.link,r=t.source;return d.a.createElement("div",{style:{display:"flex",padding:"1vmin",flexDirection:"column",width:"100%",marginRight:"10vmin",backgroundColor:"#421717",borderBottom:"1px solid white",boxSizing:"border-box"}},d.a.createElement("div",{style:{color:"#D14343",textTransform:"uppercase",fontWeight:"bold"}},"\u26a0 ".concat(a)),d.a.createElement("div",null,r),d.a.createElement("div",null,d.a.createElement("a",{href:n,rel:"noreferrer",style:{color:"lightblue"},target:"_blank"},n)))},Ot=function(){var e=j(),t=e.appErrors,a=e.layoutErrors,n=e.googleSheetsErrors,r=function(){var e=Object(u.useState)(null),t=Object(y.a)(e,2),a=t[0],n=t[1],r=Object(u.useState)({width:0,height:0}),o=Object(y.a)(r,2),i=o[0],c=o[1],l=Object(u.useCallback)((function(){c({width:(null===a||void 0===a?void 0:a.offsetWidth)||0,height:(null===a||void 0===a?void 0:a.offsetHeight)||0})}),[null===a||void 0===a?void 0:a.offsetHeight,null===a||void 0===a?void 0:a.offsetWidth]);return A("resize",l),Object(u.useLayoutEffect)((function(){l()}),[null===a||void 0===a?void 0:a.offsetHeight,null===a||void 0===a?void 0:a.offsetWidth]),[n,i]}(),o=Object(y.a)(r,2),i=o[0];o[1].height;return d.a.createElement("div",{className:"table-container",style:{height:400,width:500,overflowY:"scroll"}},d.a.createElement("div",{ref:i,style:{width:"100%"}},[].concat(Object(h.a)(t),Object(h.a)(a),Object(h.a)(n)).map((function(e,t){return d.a.createElement(xt,{error:e,key:t})}))))},Ct=function(){return d.a.createElement("div",{style:{height:"100%",pointerEvents:"all"}},d.a.createElement(Ot,null))},jt=(a(287),a(288),a(324)),Lt=function(e){var t=e.active,a=C().formUrl;return d.a.createElement("div",{style:{width:500,height:"100%",overflow:"hidden",position:"relative"}},d.a.createElement(te.a.div,{animate:t?{opacity:0}:{},style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"red",zIndex:1,top:0,left:0,opacity:.5,display:"flex",alignItems:"center",pointerEvents:t?"none":"all"}},d.a.createElement("div",{style:{width:"50%",margin:"auto",fontWeight:"bold",border:"1px solid white",padding:"1em",backgroundColor:"white",opacity:1}},"Press the Copy Layout Button before Submitting New Layout")),d.a.createElement("iframe",{frameBorder:0,marginHeight:0,marginWidth:0,src:a,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}))},kt=function(e){var t=e.onCloseComplete,a=e.visible,n=C().layoutSheetUrl,r=k().activeLayout,o=Object(u.useState)(!1),i=Object(y.a)(o,2),c=i[0],l=i[1],s=Object(u.useState)(""),f=Object(y.a)(s,2),h=(f[0],f[1],S((function(e){return JSON.stringify(e.layoutsModel.activeLayout)})));return Object(u.useEffect)((function(){}),[h,r]),m.a.createPortal(d.a.createElement(be,{active:a,backdropOpacity:.5,containerClassName:"google-form-popup",onClose:function(){}},d.a.createElement("div",{className:"google-form-popup-inner-container"},d.a.createElement(De,{action:function(){},onClick:t}),d.a.createElement(Je,null,d.a.createElement("div",{style:{borderBottom:"1px solid white",padding:"1vmin"}},d.a.createElement(pe.a,{color:"white",size:900},"Add a new layout"),d.a.createElement(pe.a,{color:"white",size:600},"The layout will be appear "," ",d.a.createElement("a",{href:n,rel:"noreferrer",style:{color:"lightblue"},target:"_blank"},"here"))),d.a.createElement(Je,{style:{height:"50vh",justifyContent:"space-between"}},d.a.createElement(Qe,{style:{width:"min-content"}}),d.a.createElement(Qe,{style:{padding:"1vmin",justifyContent:"center",height:"min-content"}},d.a.createElement(Oe,{iconBefore:d.a.createElement(jt.a,null),text:"Copy Layout",onClick:function(e){navigator.clipboard.writeText(h),l(!0)}})),d.a.createElement(Lt,{active:c}))))),document.querySelector("#google-form-popup"))},At=a(335),It=function(){var e=S((function(e){return e.layoutsModel.externalLayouts})),t=S((function(e){return e.layoutsModel.activeLayout})),a=k().setActiveLayout;return d.a.createElement("div",null,d.a.createElement(he,{cardType:c.CLOCK,className:"table-container",droppableId:l.LAYOUT_TABLE,isDropDisabled:!1},d.a.createElement("table",null,d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Title"),d.a.createElement("th",null,"Date Added"),d.a.createElement("th",null,"Author")))),d.a.createElement("table",null,d.a.createElement("tbody",null,e.map((function(e,n){var r=e.id,o=(e.title,e.author),i=e.added;return d.a.createElement("tr",{key:n,onClick:function(t){return a(e)}},d.a.createElement("td",{key:n,style:{display:"flex",justifyContent:"center"}},r===(null===t||void 0===t?void 0:t.id)&&d.a.createElement(At.a,{color:"success"}),d.a.createElement(Dt,{layout:e})),d.a.createElement("td",null,V(i)),d.a.createElement("td",null,o))}))))))},Dt=function(e){var t=e.layout,a=Object(u.useState)(!1),r=Object(y.a)(a,2),o=r[0],i=r[1],c=Object(u.useState)([0,0]),l=Object(y.a)(c,2),s=l[0],f=l[1],m=t.title,h=I(),v=h.width,g=h.height,p=L().appMode,b=t.sources(),E=t.widgets(),w=S((function(e){return e.appModel.availableCards.filter((function(e){return b.includes(e.src)}))})),x=S((function(e){return e.appModel.availableWidgets.filter((function(e){return E.includes(e.id)}))}));return d.a.createElement("div",null,d.a.createElement("div",{onMouseEnter:function(e){var t=e.pageX,a=e.pageY;f([t,a]),i(!0)},onMouseLeave:function(e){i(!1)},style:{textDecoration:o?"underline":""}},m),p===n.EDIT&&o&&d.a.createElement(bt,{height:.5*g,visible:o,width:.5*v,x:s[0],y:s[1]},d.a.createElement("div",{style:{transform:"scale(".concat(.5,")"),transformOrigin:"inherit",height:g,width:v}},d.a.createElement(We,{appMode:n.DISPLAY,cardSettings:t.layoutSettings.cardSettings,cards:w,cols:R.gridSettings.gridCols,height:g,layout:t.layout,margin:[20,20],onLayoutChange:function(e){},rows:R.gridSettings.gridRows,widgets:x,width:v}))))},Tt=function(){var e=C().refreshSheets,t=Object(u.useState)(!1),a=Object(y.a)(t,2),n=a[0],r=a[1];return d.a.createElement("div",null,d.a.createElement(Ke,{style:{display:"flex",width:"100%",justifyContent:"flex-start"}},d.a.createElement(Oe,{appearance:"primary",iconBefore:d.a.createElement(de.a,null),intent:"success",onClick:function(e){r(!0)},text:"Add New Layout",width:"55%"}),d.a.createElement("div",{style:{height:"auto",width:"10%"}},d.a.createElement(nt.a,{height:"100%",icon:d.a.createElement(rt.a,null),onClick:function(t){e()},width:"20%"}))),n&&d.a.createElement(kt,{onCloseComplete:function(){e(),r(!1)},visible:n}),d.a.createElement("div",null,d.a.createElement(It,null)))},Mt=(a(289),function(e){e.dndType;var t=e.className,a=e.children,n=(e.dragAll,e.draggableId),r=e.index,o=e.height,i=e.id,c=S((function(e){return e.layoutsModel.activeLayout})),l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(n);Object(u.useEffect)((function(){l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(n)}),[c]);return d.a.isValidElement(a)?d.a.createElement("div",{style:{display:"block",height:null!==o&&void 0!==o?o:""}},d.a.createElement(p.b,{draggableId:n,index:r},(function(e,n){return console.log(l),n.isDragging&&e&&e.draggableProps&&e.draggableProps.style&&(e.draggableProps.style.left=e.draggableProps.style.offsetLeft,e.draggableProps.style.top=e.draggableProps.style.offsetTop),d.a.createElement("div",Object.assign({className:t,id:i,ref:e.innerRef},e.draggableProps,e.dragHandleProps),d.a.cloneElement(a,{provided:e}))}))):d.a.createElement("div",null)}),Rt=function(){var e=k(),t=e.activeLayout,a=e.activeWidgets,n=S((function(e){return e.appModel.availableWidgets})),r=Object(u.useState)(n),o=Object(y.a)(r,2),i=o[0],s=o[1];return Object(u.useEffect)((function(){s(n.filter((function(e){return!(null!==t&&void 0!==t&&t.widgets().includes(e.id))})))}),[n,t,a.length]),d.a.createElement(Ke,null,d.a.createElement("div",{style:{backgroundColor:"#1f1f1f",borderRadius:".5em",overflow:"hidden",padding:"1em"}},0===i.length?d.a.createElement("div",null,"All Widgets in Use"):d.a.createElement(he,{cardType:c.CLOCK,className:"widgets-container",droppableId:l.WIDGETS_TABLE,isDropDisabled:!1},d.a.createElement(_t,null,(function(e,a,n){return i.filter((function(e){return!(null!==t&&void 0!==t&&t.widgets().includes(e.id))})).map((function(t,r){return d.a.createElement(Mt,{className:"draggable-widget",dndType:c.WIDGET,draggableId:t.id,height:e*t.h*n,id:"widgets-tab-draggable-".concat(t.id),index:r,isDragDisabled:!1,key:r},d.a.createElement(je,{colWidth:a,rowHeight:n,scale:e,widget:t}))}))})))))},_t=function(e){var t=e.children,a=Object(u.useRef)(),n=Object(u.useState)(1),r=Object(y.a)(n,2),o=r[0],i=r[1],c=I(),l=c.width,s=c.height,f=l/R.gridSettings.gridCols,m=s/R.gridSettings.gridRows;return Object(u.useEffect)((function(){a.current=document.querySelector("#editor-panel"),console.log(a.current.getBoundingClientRect().width),i(a.current.getBoundingClientRect().width/l)}),[l]),d.a.createElement("div",null,t(1.5*o,f,m))},Nt=function(){return d.a.createElement(Fe.d,null,d.a.createElement(Fe.b,null,d.a.createElement(Fe.a,null,"Content"),d.a.createElement(Fe.a,null,"Widgets"),d.a.createElement(Fe.a,null,"Layouts"),d.a.createElement(Fe.a,null,"App Settings"),d.a.createElement(Fe.a,null,"Issues ",d.a.createElement(Pt,null))),d.a.createElement(Fe.c,null,d.a.createElement(St,null)),d.a.createElement(Fe.c,null,d.a.createElement(Rt,null)),d.a.createElement(Fe.c,null,d.a.createElement(Tt,null)),d.a.createElement(Fe.c,null,d.a.createElement($e,null)),d.a.createElement(Fe.c,null,d.a.createElement(Ct,null)))},Pt=function(){var e=j().allErrors;return d.a.createElement("div",{style:{backgroundColor:e.length>0?"#D14343":"#52BD95",opacity:.5,borderRadius:"50%",width:20,height:20,aspectRatio:"1/1",fontSize:"70%",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1em"}},50<e.length?"50+":e.length)},Ut=(a(290),a(325)),Wt=a(326),zt=a(141),Bt=function(e){var t=e.title,a=e.children;return d.a.createElement(pe.a,{className:"menu-input-row",size:800,style:{display:"flex",color:"white",padding:".25em",alignItems:"center"}},t,a)},Gt=function(e){var t=e.setScale,a=e.scale,n=Object(u.useState)(a),r=Object(y.a)(n,2),o=r[0],i=r[1];return Object(u.useEffect)((function(){t(o)}),[o]),d.a.createElement(Qe,null,d.a.createElement(nt.a,{icon:d.a.createElement(Ut.a,{size:30}),onClick:function(){i(o-.1)},style:{width:"30%",height:"100%"}}),d.a.createElement("input",{defaultValue:.5,onChange:function(e){},style:{width:30},type:"text",value:a.toString().slice(0,3)}),d.a.createElement(nt.a,{icon:d.a.createElement(Wt.a,{size:30}),onClick:function(){i(o+.1)},style:{width:"30%",height:"100%"}}))},Vt=function(e){var t,a=e.card,n=x(),r=n.setCardScale,o=n.setCardBackgroundColor,i=n.cardBackgroundColor,c=n.clearEditingCard,l=n.setCardContentFit,s=n.cardContentFit,f=k().activeLayout,m=Object(u.useState)(null===f||void 0===f?void 0:f.getCardSettings(a.id)),h=Object(y.a)(m,2),v=h[0],g=(h[1],Object(u.useState)(null===f||void 0===f?void 0:f.getCardSettings(a.id))),p=Object(y.a)(g,2),b=p[0],E=p[1];return Object(u.useEffect)((function(){E(null===f||void 0===f?void 0:f.getCardSettings(a.id)),console.log(b)}),[a.id]),d.a.createElement(te.a.div,{style:{top:"6%",height:"95%",width:"inherit",pointerEvents:"all",position:"absolute",zIndex:1e3,backgroundColor:"#2d2d2d",boxSizing:"border-box"}},d.a.createElement(Ke,{style:{width:"auto"}},d.a.createElement(Je,null,d.a.createElement(Bt,{title:"Background Color:"},d.a.createElement("input",{className:"nodrag",defaultValue:"rbga(0,0,0,0)",onChange:function(e){o({cardId:a.id,color:e.target.value})},type:"color",value:i})),d.a.createElement(Bt,{title:"Scale: "},d.a.createElement(Gt,{scale:null!==(t=null===v||void 0===v?void 0:v.scale)&&void 0!==t?t:0,setScale:function(e){r({cardId:a.id,scale:e})}})),d.a.createElement(Bt,{title:"Object Fit: "},d.a.createElement(zt.a,{className:"basic-single",classNamePrefix:"select",defaultValue:s,onChange:function(e){console.log(e),l({cardId:a.id,contentFit:e.value})},style:{option:{color:"black"}},options:["contain","fill","cover","scale-down","none"].map((function(e){return{value:e,label:e}}))})),d.a.createElement(Qe,{style:{padding:"2vmin"}}),d.a.createElement(Oe,{width:"100%",height:60,text:"Exit Card Editor",onClick:function(e){c()}}))))},Ft=function(){var e=L(),t=e.appMode,a=e.editingCard,r=Object(u.useState)(!1),o=Object(y.a)(r,2),i=o[0],c=o[1],l=U()("editor-panel",{"editor-panel-full":!i,hidden:t===n.DISPLAY,"editor-panel-minimized":i}),s=U()("editor",{"editor-visible":t===n.EDIT});return m.a.createPortal(d.a.createElement(Ve.a,{bounds:{left:0,top:0,right:window.innerWidth-50,bottom:window.innerHeight-50},defaultClassName:l,defaultPosition:{x:100,y:100},handle:".editor-panel-handle"},d.a.createElement("div",{className:s,id:"editor-panel"},d.a.createElement(Ht,null,d.a.createElement(Jt,{icon:d.a.createElement(ze.a,null),onMouseUp:function(){c(!1)}}),d.a.createElement(Jt,{icon:d.a.createElement(Be.a,null),onMouseUp:function(){c(!0)}})),a&&d.a.createElement(Vt,{card:a}),d.a.createElement(Nt,null))),document.querySelector("#editor-panel-container"))},Yt=d.a.memo(Ft),Ht=function(e){var t=e.children;return d.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},Jt=function(e){var t=e.icon,a=e.onMouseUp;return d.a.createElement("div",{className:"window-button",onMouseUp:a},t)},Qt=a(329),Kt=function(){var e=w((function(e){return e.appModel.toggleAppMode})),t=Object(Qt.a)((function(){e()})),a={position:"absolute",width:50,height:50,border:R.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0,opacity:0};return m.a.createPortal(d.a.createElement(te.a.div,{style:Object(He.a)(Object(He.a)({},a),{},{backgroundColor:"white"}),whileTap:{backgroundColor:"green",opacity:1}},d.a.createElement("div",Object.assign({style:a},t)),","),document.querySelector("#mode-change-button"))},qt=function(e){var t=e.children;e.padding;return d.a.createElement("div",{style:{width:"100vw",height:"100vh"}},t)},Xt=a(299),$t=a(330),Zt=function(e){var t=e.seconds,a=e.onEnd,n=Object(u.useState)(t),r=Object(y.a)(n,2),o=r[0],i=r[1];return Object(u.useEffect)((function(){if(0==o&&a(),o){var e=setInterval((function(){i(o-1)}),1e3);return function(){return clearInterval(e)}}}),[o]),d.a.createElement("div",null,d.a.createElement("h1",null,o))},ea=d.a.createContext({setVisible:function(e){},sheetsAreLoaded:!1}),ta=function(){var e=L().sheetsAreLoaded,t=C(),a=t.urlQueryLink;t.fetchTopLevelSheet;console.log(e);var n=Object(u.useState)(!0),r=Object(y.a)(n,2),o=r[0],i=r[1];Object(u.useEffect)((function(){e&&i(!1)}),[e]);return d.a.createElement(ea.Provider,{value:{setVisible:i,sheetsAreLoaded:e}},d.a.createElement(pt.a,null,o&&d.a.createElement(te.a.div,{animate:"in",exit:"out",style:{width:"40%",height:"50%",minHeight:"fit-content",display:"flex",flexDirection:"column",textAlign:"center",position:"absolute",justifyContent:"center",zIndex:100,left:"50%",x:"-50%",top:"50%",borderRadius:"10px",backdropFilter:"blur(10px)",border:" 1px solid rgba(255, 255, 255, 0.294)",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",padding:"1em",opacity:0},variants:{in:{opacity:[0,1],y:["-30%","-50%"]},out:{y:"-60%",opacity:0}}},!e&&a&&d.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},d.a.createElement(pe.a,{size:900},"Loading Content from Google Sheets"),d.a.createElement(Xt.a,{size:100})),!a&&d.a.createElement(aa,null))))},aa=function(){var e=Object(u.useContext)(ea).setVisible,t=C().fetchTopLevelSheet;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.a.createElement($t.a,{size:100})),d.a.createElement(pe.a,{size:900}),d.a.createElement(pe.a,{size:900},"No Google Sheet Provided via URL! ",d.a.createElement("br",null),d.a.createElement("br",null),"Switching to backup sheet in"," ","".concat(R.timers.noUrlTimeout),"s.",d.a.createElement(Zt,{onEnd:function(){e(!1),t(R.backupParentSheetUrl)},seconds:R.timers.noUrlTimeout}),"Visit"," ",d.a.createElement("a",{href:"https://github.com/NCSU-Libraries/cupboard-dxl-display/wiki",rel:"noreferrer",target:"_blank"},"Cupboard Wiki")," ","for more information on setting up your Google Sheets for Cupboard."))},na=function(){var e,t=C(),a=t.fetchTopLevelSheet,r=t.setUrlSheet,o=k(),i=o.activeLayout,c=o.setBufferLayout,l=o.activeCards,s=o.activeWidgets,f=L(),m=f.appMode,g=f.sheetsAreLoaded,p=function(){var e=Object(b.c)().search;return d.a.useMemo((function(){return new URLSearchParams(e)}),[e])}();e=function(){r(p.get("url"));var e=p.get("url");e&&a(e)},Object(u.useEffect)(e,[]);var y=I(),E=y.width,w=y.height;return d.a.createElement(d.a.Fragment,null,d.a.createElement(ee,null),d.a.createElement(Kt,null),d.a.createElement(ta,null),g&&d.a.createElement(N,null,d.a.createElement(T,null,d.a.createElement(gt,{visible:g}),d.a.createElement(Yt,null),d.a.createElement(qt,null,d.a.createElement(v.a,null,i&&g&&d.a.createElement(We,{appMode:m,cardSettings:i.layoutSettings.cardSettings,cards:Object(h.a)(l),cols:R.gridSettings.gridCols,height:w,isDraggable:m===n.EDIT,isResizable:m===n.EDIT,layout:i.layout,margin:[20,20],onLayoutChange:function(e){var t={lg:e,md:e,sm:e,xs:e,xxs:e};m===n.EDIT&&i.setGridLayout(t),c(t)},rows:R.gridSettings.gridRows,widgets:Object(h.a)(s),width:E}))))))},ra=function(){return d.a.createElement(g.a,null,d.a.createElement(na,null))},oa=a(23),ia=a(33),ca=a(22),la=a.n(ca),sa=a(1),ua=a(2);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(ft||(ft={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(mt||(mt={}));var da=function(){function e(t){Object(sa.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(ua.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var a=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(mt.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(h.a)(a)),console.log(a)}},{key:"isValid",value:function(){return 0===this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(a){if(a===ft.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var fa=function(){function e(t,a){var n;Object(sa.a)(this,e),this.id=void 0,this.src=void 0,this.title=void 0,this.added=void 0,this.backgroundColor=void 0,this.scale=void 0,this.author=void 0,this.interaction=void 0,this.contentType=void 0,this.metaData=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.id="row_".concat(a,"_").concat(t.title),this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.author=t.author,this.interaction=i[t.interaction],this.contentType=function(e){return"string"===typeof e&&/[./](gif|jpg|jpeg|tiff|png)$/i.test(e)}(n=this.src)?"image":function(e){return"string"===typeof e&&/[./](mp4|webm|mov)$/i.test(e)}(n)?"video":function(e){return"string"===typeof e&&e.includes("embed")}(n)?"embed":function(e){return"string"===typeof e&&e.includes("https")}(n)?"website":"widget","widget"===this.contentType&&t.widgetType?(this.metaData={widgetType:t.widgetType},this.id=t.widgetType):(this.metaData={src:t.src,title:t.title,added:new Date(t.added),sourceId:t.src,author:t.author},this.id=t.src),this.isActive=!1,this.validator=new da(this.src),this.failed=!1}return Object(ua.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}();var ma=function(){function e(t){Object(sa.a)(this,e),this.id=void 0,this.contentType=void 0,this.w=void 0,this.h=void 0,this.isActive=void 0,this.id=t.id,this.w=t.w,this.h=t.h,this.isActive=!1,this.contentType="widget"}return Object(ua.a)(e,[{key:"setActive",value:function(e){this.isActive=e}}]),e}(),ha={clock:{id:"clock",w:2,h:2},info:{id:"info",w:1,h:1}},va=Object.values(ha).map((function(e){return new ma(e)})),ga={activeCards:[],activeWidgets:[],addAppError:Object(s.b)((function(e,t){var a=e.appErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.appErrors.push(t)})),appErrors:[],appMode:n.DISPLAY,availableCards:[],availableWidgets:va,editingCard:void 0,isLoaded:!1,manageViewModeChange:Object(s.f)((function(e,t){switch(e.setAppMode(t),t){case n.EDIT:case n.DISPLAY:case n.CYCLE:}})),onCardSheetLoadSuccess:Object(s.g)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(ia.a)(la.a.mark((function e(t,a,n){var r;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,a.payload.getSheetRows("CARDS").then((function(e){var a,n=e.map((function(e){return{added:e.added,author:e.author,interaction:e.interaction,sourceid:e.sourceid,src:e.src,title:e.title}})),o=r().availableCards,i=Object(oa.a)(n.entries());try{for(i.s();!(a=i.n()).done;){var c=Object(y.a)(a.value,2),l=c[0],s=c[1];r().availableCards.map((function(e){return e.src})).includes(s.src)||o.push(new fa(s,l))}}catch(u){i.e(u)}finally{i.f()}t.setAvailableCards(o)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(s.g)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(ia.a)(la.a.mark((function e(t,a,n){var r,o,i,c,l,s;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,o=new Set(a.payload.sources()),i=r(),c=i.availableWidgets,t.setActiveWidgets(c.filter((function(e){return a.payload.widgets().includes(e.id)}))),l=r().availableCards.map((function(e){return o.has(e.id)?e.setActive(!0):e.setActive(!1),e})),s=r().availableCards.filter((function(e){return o.has(e.id)})),t.setAvailableCards(l),t.setActiveCards(s);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),onSwapCardContent:Object(s.g)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(ia.a)(la.a.mark((function e(t,a,n){var r,o;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,(o=r().activeCards.map((function(e){return e.id===a.payload.targetId?r().availableCards.find((function(e){return e.id===a.payload.sourceId})):e})))&&t.setActiveCards(o);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),rotateLayouts:!0,rotationSpeed:R.timers.rotationDuration,setActiveCards:Object(s.b)((function(e,t){e.activeCards=t})),setActiveWidgets:Object(s.b)((function(e,t){e.activeWidgets=t})),setAppMode:Object(s.b)((function(e,t){e.appMode=t})),setAvailableCards:Object(s.b)((function(e,t){e.availableCards=t})),setEditingCard:Object(s.b)((function(e,t){e.editingCard=t})),setRotateLayouts:Object(s.b)((function(e,t){e.rotateLayouts=t})),setRotationSpeed:Object(s.b)((function(e,t){e.rotationSpeed=t})),toggleAppMode:Object(s.f)((function(e,t,a){switch((0,a.getState)().appMode){case n.EDIT:e.setEditingCard(void 0),e.setAppMode(n.DISPLAY);break;case n.DISPLAY:e.setAppMode(n.EDIT);case n.CYCLE:}}))},pa=ga,ya={rotationSpeed:R.timers.rotationDuration,enableQrCodes:!0,enableIframeInteractions:!1,rotateLayouts:!0,enableIframeAudio:!1,setRotationSpeed:Object(s.b)((function(e,t){e.rotationSpeed=t})),setShowQrCodes:Object(s.b)((function(e,t){e.enableQrCodes=t})),setEnableIframeInteractions:Object(s.b)((function(e,t){e.enableIframeInteractions=t})),setRotateLayouts:Object(s.b)((function(e,t){e.rotateLayouts=t})),setEnableIframeAudio:Object(s.b)((function(e,t){e.enableIframeAudio=t}))},ba=a(139),Ea=a.n(ba),wa=function(){function e(t,a){Object(sa.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=a,this.sheets=new Map}return Object(ua.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(a,n){var r=t.sheets.get(e);r?a(r.map((function(e){return e}))):n("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),Sa={addGoogleSheetError:Object(s.b)((function(e,t){var a=e.googleSheetsErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.googleSheetsErrors.push(t)})),cardDataGoogleSheet:null,cardSheetUrl:void 0,fetchParentSheet:Object(s.f)((function(e,t){try{Ca("TOP_LEVEL",t).then((function(a){var n=a.rows[0];e.setFormUrl(n.googleForm),e.setLayoutsSheetUrl(n.layoutsSheet),e.setCardSheetUrl(n.cardsSheet),e.setParentSheetUrl(t),e.fetchSheet([{name:"LAYOUTS",url:Oa(n.layoutsSheet)},{name:"CARDS",url:Oa(n.cardsSheet)}])})).catch((function(t){e.setLayoutsSheetUrl(Oa("".concat("/cupboard-dxl-display","/LAYOUTS_BACKUP.csv"))),e.setCardSheetUrl(Oa("".concat("/cupboard-dxl-display","/CARDS_BACKUP.csv"))),e.fetchSheet([{name:"LAYOUTS",url:"".concat("/cupboard-dxl-display","/LAYOUTS_BACKUP.csv")},{name:"CARDS",url:"".concat("/cupboard-dxl-display","/CARDS_BACKUP.csv")}])}))}catch(r){var a,n;e.addGoogleSheetError({description:"failed to get the mater google sheet, reverting to local svg",errorType:"failed to fetch master google sheet",link:null!==(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHEET_URL)&&void 0!==a?a:"NA",source:null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHEET_URL)&&void 0!==n?n:"NA"})}})),fetchSheet:Object(s.f)(function(){var e=Object(ia.a)(la.a.mark((function e(t,a,n){var r,o,i,c;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,o=a.map((function(e){return Ca(e.name,e.url)})),i=r(),(c=i.cardSheetUrl)?Promise.allSettled(o).then((function(e){var a,n=new wa("DSC App",c),r=[],o=Object(oa.a)(e.entries());try{for(o.s();!(a=o.n()).done;){var i=Object(y.a)(a.value,2),l=(i[0],i[1]);"fulfilled"==l.status&&(r.push(l),n.addSheet(l.value.sheetTitle,l.value.rows)),l.status}}catch(s){o.e(s)}finally{o.f()}t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))})):t.addGoogleSheetError({description:"",errorType:"no url for cards provided",link:"",source:""});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),formUrl:void 0,googleSheetsErrors:[],layoutDataGoogleSheet:null,layoutSheetUrl:void 0,parentGoogleSheet:void 0,parentSheetUrl:void 0,refreshSheets:Object(s.f)(function(){var e=Object(ia.a)(la.a.mark((function e(t,a,n){var r,o,i;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,o=r(),(i=o.parentSheetUrl)&&t.fetchParentSheet(i);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),requests:[],setAppGoogleSheetData:Object(s.b)((function(e,t){e.parentGoogleSheet=t})),setCardDataGoogleSheet:Object(s.b)((function(e,t){e.cardDataGoogleSheet=t})),setCardSheetUrl:Object(s.b)((function(e,t){e.cardSheetUrl=t})),setFormUrl:Object(s.b)((function(e,t){e.formUrl=t})),setLayoutDataGoogleSheet:Object(s.b)((function(e,t){e.layoutDataGoogleSheet=t})),setLayoutsSheetUrl:Object(s.b)((function(e,t){e.layoutSheetUrl=t})),setParentSheetUrl:Object(s.b)((function(e,t){e.parentSheetUrl=t})),setUrlSheet:Object(s.b)((function(e,t){e.urlSheet=t})),sheetsAreLoaded:Object(s.c)([function(e){return[e.layoutDataGoogleSheet,e.cardDataGoogleSheet,e.parentGoogleSheet]}],(function(e){return e.every((function(e){return null!==e}))})),urlSheet:null},xa=Sa;function Oa(e){var t=e.split("/")[5],a=e.split("gid=")[1];return"https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv&gid=").concat(a)}function Ca(e,t){var a;return new Promise((function(n,r){try{Ea.a.parse(t,{complete:function(t){a=t.data,n({rows:a,sheetTitle:e})},delimiter:",",download:!0,dynamicTyping:!0,header:!0})}catch(o){r("failed to get sheet")}}))}var ja={layout:{lg:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],md:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],sm:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xxs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}]},layoutSettings:{gridSettings:{defaultBackgroundColor:"red"},cardSettings:[]},widgets:[]},La={backgroundColor:void 0,objectPosition:"center",scale:1},ka={defaultBackgroundColor:"red"},Aa=function(){function e(t){Object(sa.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.sourceLayout=void 0,this.layoutSettings=void 0,this.layout=void 0,this.layoutWidgets=void 0;var a=function(e){var t=JSON.parse(e.layout);return t.layout?t:ja}(t),n=a.layout;this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]),this.sourceLayout=JSON.parse(t.layout).layout,this.layoutSettings=JSON.parse(t.layout).layoutSettings?JSON.parse(t.layout).layoutSettings:{cardSettings:n.lg.map((function(e){return Object(He.a)({id:e.i},La)})),gridSettings:ka},this.layoutWidgets=JSON.parse(t.layout).layoutWidgets?JSON.parse(t.layout).layoutWidgets:[],this.layout=n}return Object(ua.a)(e,[{key:"swapCard",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,r=Object(y.a)(a[t],2),o=r[0],i=r[1],c=Object(oa.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2),s=l[0];l[1].i==e.targetId&&(i[s].i=e.sourceId)}}catch(u){c.e(u)}finally{c.f()}this.layout[o]=i}}},{key:"removeCard",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,r=Object(y.a)(a[t],2),o=r[0],i=r[1],c=Object(oa.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2);l[0],l[1];this.layout[o]=i.filter((function(t){return t.i!==e}))}}catch(s){c.e(s)}finally{c.f()}}}},{key:"clearCards",value:function(){for(var e=0,t=Object.entries(this.layout);e<t.length;e++){var a,n=Object(y.a)(t[e],2),r=n[0],o=n[1],i=Object(oa.a)(o.entries());try{for(i.s();!(a=i.n()).done;){var c=Object(y.a)(a.value,2);c[0],c[1];this.layout[r]=[]}}catch(l){i.e(l)}finally{i.f()}}}},{key:"addCard",value:function(e,t){if(!this.sources().includes(e.id)){for(var a=0,n=Object.entries(this.layout);a<n.length;a++){var r=Object(y.a)(n[a],2),o=r[0],i=(r[1],{w:1,x:t.x,h:1,y:t.y,i:e.id});this.layout[o].push(i)}this.layoutSettings.cardSettings.map((function(e){return e.id})).includes(e.id)||this.layoutSettings.cardSettings.push({backgroundColor:void 0,id:e.id,objectPosition:"center",scale:1})}}},{key:"addWidget",value:function(e,t){this.layoutWidgets.push(e);for(var a=0,n=Object.entries(this.layout);a<n.length;a++){var r=Object(y.a)(n[a],2),o=r[0],i=(r[1],{w:1,x:t.x,h:1,y:t.y,i:e.id});this.layout[o].push(i)}}},{key:"resetLayout",value:function(){this.layout=JSON.parse(JSON.stringify(this.sourceLayout))}},{key:"setGridLayout",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,r=Object(y.a)(a[t],2),o=r[0],i=r[1],c=Object(oa.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2);l[0],l[1];this.layout[o]=e[o]}}catch(s){c.e(s)}finally{c.f()}}}},{key:"sources",value:function(){return this.layout.lg.map((function(e){return e.i}))}},{key:"widgets",value:function(){return this.layout.lg.filter((function(e){return Object.keys(ha).includes(e.i)})).map((function(e){return e.i}))}},{key:"getCardSettings",value:function(e){return this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0]}},{key:"setCardScale",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].scale=t)}},{key:"setCardBackgroundColor",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].backgroundColor=t)}},{key:"setCardContentFit",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].contentFit=t)}},{key:"layoutToString",value:function(){var e={layout:this.layout.lg,layoutSettings:this.layoutSettings};return JSON.stringify(e)}}]),e}();var Ia=a(140),Da={appModel:pa,appSettingsModel:ya,googleSheetsModel:xa,layoutsModel:{activeLayout:void 0,addCard:Object(s.f)((function(e,t,a){var n=a.getState,r=(0,a.getStoreState)().appModel,o=r.availableCards,i=r.availableWidgets,c=t.sourceId,l=t.targetPosition,s=[].concat(Object(h.a)(o),Object(h.a)(i)).find((function(e){return e.id==c})),u=n().activeLayout;if(u&&s){var d=n().bufferLayout;u.setGridLayout(d),null===u||void 0===u||u.addCard(s,l),e.setActiveLayout(u)}})),addLayoutError:Object(s.b)((function(e,t){var a=e.layoutErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.layoutErrors.push(t)})),animationCounter:0,bufferLayout:Ia,cardBackgroundColor:void 0,cardContentFit:void 0,cardScale:void 0,clearCards:Object(s.f)((function(e,t,a){var n=(0,a.getState)().activeLayout;n&&(n.clearCards(),e.setBufferLayout(n.layout),e.setActiveLayout(n))})),deleteCard:Object(s.f)((function(e,t,a){var n=a.getState,r=n().activeLayout;if(r){var o=n().bufferLayout;r.layout=o,r.removeCard(t),e.setActiveLayout(r)}})),externalLayouts:[],layoutErrors:[],layoutsString:Object(s.c)([function(e){return e.bufferLayout}],(function(e){return JSON.stringify(e)})),onSetAppGoogleSheetData:Object(s.g)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t,a){var n=a.getState;t.payload.getSheetRows("LAYOUTS").then((function(t){var a,r=n().externalLayouts,o=new Set(r.map((function(e){return e.id}))),i=new Set(t.map((function(e){return e.title+"_"+e.timestamp}))),c=Object(oa.a)(t);try{for(c.s();!(a=c.n()).done;){var l=a.value;try{var s=l.title+"_"+l.timestamp;if(!o.has(s)){var u=new Aa(l);r.push(u)}}catch(y){var d,f;e.addLayoutError({description:"failed to read layout row ".concat(null!==(d=l.title)&&void 0!==d?d:"NO TITLE PROVIDED"),errorType:"failed to read layout row",link:"none",source:null!==(f=l.title)&&void 0!==f?f:"NO TITLE PROVIDED"})}}}catch(b){c.e(b)}finally{c.f()}var m,h=Object(oa.a)(r);try{for(h.s();!(m=h.n()).done;){var v=m.value;if(!i.has(v.id)){var g=r.indexOf(v);r.splice(g,1)}}}catch(b){h.e(b)}finally{h.f()}var p=r[0];p&&(e.setActiveLayout(p),e.setBufferLayout(p.layout)),e.setExternalLayouts(r)}))})),onToggleViewMode:Object(s.g)((function(e,t){return t.appModel.manageViewModeChange}),(function(e,t,a){var n=a.getState,r=n().activeLayout;if(r){var o=n().bufferLayout;r.layout=o,r.setGridLayout(o),e.setActiveLayout(r)}})),resetLayout:Object(s.f)((function(e,t,a){var n=a.getState;if(n().activeLayout){var r=n().activeLayout;null===r||void 0===r||r.resetLayout(),r&&e.setActiveLayout(r)}})),setActiveLayout:Object(s.b)((function(e,t){e.activeLayout=t,e.bufferLayout=JSON.parse(JSON.stringify(t.layout))})),setAnimationCounter:Object(s.b)((function(e,t){e.animationCounter+=1})),setBufferLayout:Object(s.b)((function(e,t){e.bufferLayout=JSON.parse(JSON.stringify(t))})),setCardBackgroundColor:Object(s.b)((function(e,t){var a,n=t.cardId,r=t.color;null===(a=e.activeLayout)||void 0===a||a.setCardBackgroundColor(n,r),e.cardBackgroundColor=r})),setCardContentFit:Object(s.b)((function(e,t){var a,n=t.cardId,r=t.contentFit;null===(a=e.activeLayout)||void 0===a||a.setCardContentFit(n,r),e.cardContentFit=r})),setCardScale:Object(s.b)((function(e,t){var a,n,r=t.cardId,o=t.scale;null===(a=e.activeLayout)||void 0===a||a.layoutSettings.cardSettings;null===(n=e.activeLayout)||void 0===n||n.setCardScale(r,o),e.cardScale=o})),setCardSettings:Object(s.b)((function(e,t){var a;null===(a=e.activeLayout)||void 0===a||a.sourceLayout.layoutSettings.cardSettings})),setExternalLayouts:Object(s.b)((function(e,t){e.externalLayouts=t})),setNextLayout:Object(s.f)((function(e,t,a){var n=(0,a.getState)(),r=n.externalLayouts,o=n.activeLayout;if(o){var i=r.map((function(e){return e.id})).indexOf(null===o||void 0===o?void 0:o.id),c=r[(i+1)%r.length];e.setActiveLayout(c)}})),swapCardContent:Object(s.f)((function(e,t,a){var n=a.getState,r=n().activeLayout;if(r){var o=n().bufferLayout;r.layout=o,r.swapCard(t),e.setActiveLayout(r)}})),transitionLayout:Object(s.f)((function(e,t,a){var n=a.getState;e.setAnimationCounter(n().animationCounter+1),setTimeout((function(){e.setNextLayout()}),1e3)})),updateLayout:Object(s.b)((function(e,t){var a=e.activeLayout;a&&(a.swapCard(t),e.activeLayout=a)}))}},Ta=Object(s.d)(Da,{name:"Cuboard App Store"});m.a.render(d.a.createElement(s.a,{store:Ta},d.a.createElement(ra,null)),document.querySelector("#root"))},78:function(e,t,a){},96:function(e,t,a){}},[[296,1,2]]]);
//# sourceMappingURL=main.ebf06494.chunk.js.map